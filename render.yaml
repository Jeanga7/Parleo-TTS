services:
  - name: paleo-tts-backend
    type: web
    env: python
    buildCommand: ""
    startCommand: gunicorn app:app
    envVars:
      - key: FLASK_ENV
        value: production
    plan: free
    region: oregon
    build:
      path: backend
    runtime: python3
    pythonVersion: "3.9"

  - name: paleo-tts-frontend
    type: web  # Utilisation de "web" au lieu de "static"
    env: node
    buildCommand: npm install && npm run build
    startCommand: npm run preview  # Utilisation de "vite preview" pour servir le frontend
    envVars:
      - key: VITE_BACKEND_URL
        value: https://paleo-backend.onrender.com
    plan: free
    region: oregon
    build:
      path: frontend